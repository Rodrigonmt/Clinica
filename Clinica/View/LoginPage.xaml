<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="Clinica.View.LoginPage"
    Shell.NavBarIsVisible="True"
    BackgroundColor="{DynamicResource PageBackgroundColor}"
    Appearing="OnPageAppearing">

    <ContentPage.Resources>

        <!-- Light Mode -->
        <Color x:Key="LightBackground">#F4F7FB</Color>
        <Color x:Key="LightCard">#FFFFFF</Color>
        <Color x:Key="LightText">#222222</Color>
        <Color x:Key="LightPlaceholder">#777</Color>
        <Color x:Key="LightPrimary">#5A7DFE</Color>

        <!-- Dark Mode -->
        <Color x:Key="DarkBackground">#1E1E1E</Color>
        <Color x:Key="DarkCard">#2B2B2B</Color>
        <Color x:Key="DarkText">#FFFFFF</Color>
        <Color x:Key="DarkPlaceholder">#BBBBBB</Color>
        <Color x:Key="DarkPrimary">#8BA2FF</Color>

        <!-- Auto Theme -->
        <AppThemeBinding x:Key="PageBackgroundColor" Light="{StaticResource LightBackground}" Dark="{StaticResource DarkBackground}" />
        <AppThemeBinding x:Key="CardColor" Light="{StaticResource LightCard}" Dark="{StaticResource DarkCard}" />
        <AppThemeBinding x:Key="TextColorPrimary" Light="{StaticResource LightText}" Dark="{StaticResource DarkText}" />
        <AppThemeBinding x:Key="PlaceholderColor" Light="{StaticResource LightPlaceholder}" Dark="{StaticResource DarkPlaceholder}" />
        <AppThemeBinding x:Key="PrimaryColor" Light="{StaticResource LightPrimary}" Dark="{StaticResource DarkPrimary}" />

    </ContentPage.Resources>

    <ScrollView>
        <VerticalStackLayout Padding="30" Spacing="25">

            <!-- Títulos -->
            <Label x:Name="lblTitulo"
                   Text="Bem-vindo"
                   FontSize="36"
                   TextColor="{DynamicResource TextColorPrimary}"
                   FontAttributes="Bold"
                   Opacity="0" />

            <Label x:Name="lblSubTitulo"
                   Text="Faça login para continuar"
                   FontSize="18"
                   TextColor="{DynamicResource TextColorPrimary}"
                   Opacity="0" />

            <!-- Container -->
            <Frame x:Name="frmContainer"
                   BackgroundColor="{DynamicResource CardColor}"
                   CornerRadius="25"
                   Padding="25"
                   HasShadow="True"
                   Opacity="0">

                <VerticalStackLayout Spacing="22">

                    <!-- Label Email -->
                    <Label Text="Email"
                           FontSize="16"
                           TextColor="{DynamicResource TextColorPrimary}" />

                    <!-- Campo Email -->
                    <Grid ColumnDefinitions="40,*,40"
      BackgroundColor="#F0F2F5"
      HeightRequest="55"
      Padding="5"
      ColumnSpacing="10">

                        <Image VerticalOptions="Center">
                            <Image.Source>
                                <FontImageSource
                FontFamily="MaterialIcons"
                Glyph="&#xe0be;"
                Size="24"
                Color="#555"/>
                            </Image.Source>
                        </Image>

                        <Entry x:Name="EmailEntry"
           Grid.Column="1"
           Placeholder="Digite seu email"
           TextColor="{DynamicResource TextColorPrimary}"
           PlaceholderColor="{DynamicResource PlaceholderColor}"
           FontSize="16"
           BackgroundColor="Transparent"/>
                    </Grid>


                    <!-- Label Senha -->
                    <Label Text="Senha"
                           FontSize="16"
                           TextColor="{DynamicResource TextColorPrimary}" />

                    <!-- Campo Senha -->
                    <Grid ColumnDefinitions="40,*,40"
      BackgroundColor="#F0F2F5"
      HeightRequest="55"
      Padding="5"
      ColumnSpacing="10">

                        <Image VerticalOptions="Center">
                            <Image.Source>
                                <FontImageSource
                FontFamily="MaterialIcons"
                Glyph="&#xe897;"
                Size="24"
                Color="#555"/>
                            </Image.Source>
                        </Image>

                        <Entry x:Name="SenhaEntry"
           Grid.Column="1"
           Placeholder="Digite sua senha"
           IsPassword="True"
           FontSize="16"
           TextColor="{DynamicResource TextColorPrimary}"
           PlaceholderColor="{DynamicResource PlaceholderColor}"
           BackgroundColor="Transparent"/>

                        <Image x:Name="imgMostrarSenha"
           Grid.Column="2"
           VerticalOptions="Center"
           HorizontalOptions="Center">
                            <Image.Source>
                                <FontImageSource
                FontFamily="MaterialIcons"
                Glyph="&#xe8f4;"
                Size="24"
                Color="#555"/>
                            </Image.Source>
                            <Image.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnMostrarSenhaTapped"/>
                            </Image.GestureRecognizers>
                        </Image>
                    </Grid>


                    <HorizontalStackLayout VerticalOptions="Center" Spacing="8">
                        <CheckBox x:Name="chkLembrar" VerticalOptions="Center"/>
                        <Label Text="Lembrar-me" VerticalOptions="Center" TextColor="{DynamicResource TextColorPrimary}" />
                    </HorizontalStackLayout>


                    <!-- Botão Login -->
                    <Button x:Name="btnEntrar"
                            Text="Entrar"
                            Clicked="OnLoginClicked"
                            HeightRequest="55"
                            CornerRadius="15"
                            BackgroundColor="{DynamicResource PrimaryColor}"
                            TextColor="White"
                            FontSize="20"
                            FontAttributes="Bold" />

                    <!-- Criar Conta -->
                    <HorizontalStackLayout HorizontalOptions="Center">
                        <Label Text="Não tem conta?"
                               TextColor="{DynamicResource TextColorPrimary}" />

                        <Label Text=" Cadastre-se"
                               TextColor="{DynamicResource PrimaryColor}"
                               FontAttributes="Bold">
                            <Label.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnCadastrarClicked" />
                            </Label.GestureRecognizers>
                        </Label>
                    </HorizontalStackLayout>

                </VerticalStackLayout>
            </Frame>

            <!-- Esqueci Minha Senha -->
            <Label
                x:Name="btnEsqueci"
                Text="Esqueci minha senha"
                TextColor="{DynamicResource PrimaryColor}"
                FontSize="16"
                FontAttributes="Bold"
                TextDecorations="Underline"
                HorizontalOptions="Center"
                Margin="0,10,0,10">
                <Label.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnRecuperarClicked"/>
                </Label.GestureRecognizers>
            </Label>


        </VerticalStackLayout>
    </ScrollView>
</ContentPage>