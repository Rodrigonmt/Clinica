<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Clinica.View.ConsultasAgendaPage"
             Title="Meus Horários Agendados"
             BackgroundColor="White">

    <Grid Padding="20"
      RowDefinitions="Auto,*,Auto">

        <!-- Título -->
        <Label Text="Horários Agendados"
           FontSize="24"
           FontAttributes="Bold"
           TextColor="Black"
           HorizontalOptions="Center"
           Grid.Row="0"/>

        <!-- Lista com SCROLL -->
        <CollectionView x:Name="consultasCollection"
                    ItemsSource="{Binding Consultas}"
                    SelectionMode="None"
                    Grid.Row="1">

            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame BorderColor="#007AFF"
                       CornerRadius="12"
                       Padding="10"
                       Margin="5">

                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnConsultaTapped"/>
                        </Frame.GestureRecognizers>

                        <Grid ColumnDefinitions="Auto,*"
                          RowDefinitions="Auto,Auto,Auto,Auto"
                          ColumnSpacing="10">

                            <!-- TÍTULOS -->
                            <Label Text="Data:" Grid.Row="0" Grid.Column="0"
                               FontSize="16" FontAttributes="Bold"/>

                            <Label Text="Hora:" Grid.Row="1" Grid.Column="0"
                               FontSize="16" FontAttributes="Bold"/>

                            <Label Text="Profissional:" Grid.Row="2" Grid.Column="0"
                               FontSize="16" FontAttributes="Bold"/>

                            <Label Text="Status:" Grid.Row="3" Grid.Column="0"
                               FontSize="16" FontAttributes="Bold"/>

                            <!-- VALORES -->
                            <Label Text="{Binding Data, StringFormat='{0:dd/MM/yyyy}'}"
                               Grid.Row="0" Grid.Column="1"/>

                            <Label Text="{Binding Hora}"
                               Grid.Row="1" Grid.Column="1"
                               TextColor="Gray"/>

                            <Label Text="{Binding Medico}"
                               Grid.Row="2" Grid.Column="1"
                               TextColor="#007AFF"/>

                            <Label Text="{Binding Status}"
                               Grid.Row="3" Grid.Column="1"
                               FontAttributes="Italic"
                               TextColor="DarkGreen"/>

                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <!-- Sem consultas -->
        <Label x:Name="lblSemConsultas"
           Text="Nenhum Horário Agendado."
           FontSize="16"
           TextColor="Gray"
           HorizontalOptions="Center"
           Grid.Row="2"
           IsVisible="False"/>

    </Grid>
</ContentPage>
