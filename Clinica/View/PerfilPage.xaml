<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Clinica.View.PerfilPage"
             BackgroundColor="#F4F7FB"
             Title="Meu Perfil">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="25">

            <!-- FOTO DO USUÁRIO -->
            <VerticalStackLayout HorizontalOptions="Center" Spacing="10">
                <Image x:Name="FotoPerfil"
                       WidthRequest="150"
                       HeightRequest="150"
                       Aspect="AspectFill"
                       Source="perfil_inicial.jpg">
                    <Image.Clip>
                        <EllipseGeometry Center="75,75" RadiusX="75" RadiusY="75"/>
                    </Image.Clip>
                </Image>

                <Button Text="Alterar Foto"
                        Clicked="OnAlterarFotoClicked"
                        BackgroundColor="#2196F3"
                        TextColor="White"
                        WidthRequest="150"
                        CornerRadius="12"/>
            </VerticalStackLayout>


            <!-- DADOS PESSOAIS -->
            <Frame BackgroundColor="White"
                   Padding="15"
                   CornerRadius="15"
                   HasShadow="True">

                <VerticalStackLayout Spacing="15">
                    <Label Text="Dados Pessoais"
                           FontAttributes="Bold"
                           FontSize="Medium"/>

                    <Entry x:Name="NomeEntry"
                           Placeholder="Nome Completo"/>

                    <Entry x:Name="TelefoneEntry"
                           Placeholder="(00) 00000-0000"
                           Keyboard="Telephone"
                           TextChanged="TelefoneEntry_TextChanged"/>

                    <Entry x:Name="DataNascEntry"
                           Placeholder="Data de Nascimento (DD/MM/AAAA)"
                           Keyboard="Numeric"
                           TextChanged="DataNascEntry_TextChanged"/>
                </VerticalStackLayout>
            </Frame>


            <!-- ENDEREÇO -->
            <Frame BackgroundColor="White"
                   Padding="15"
                   CornerRadius="15"
                   HasShadow="True">

                <VerticalStackLayout Spacing="15">

                    <Label Text="Endereço"
                           FontAttributes="Bold"
                           FontSize="Medium"/>

                    <Picker x:Name="EstadoPicker"
                            Title="Estado (UF)"
                            ItemsSource="{Binding Estados}"
                            SelectedIndexChanged="EstadoPicker_SelectedIndexChanged"/>

                    <Picker x:Name="CidadePicker"
                            Title="Cidade"/>

                    <Entry x:Name="RuaEntry"
                           Placeholder="Rua"/>

                    <Entry x:Name="NumeroEntry"
                           Placeholder="Número"
                           Keyboard="Numeric"/>

                    <Picker x:Name="TipoResidenciaPicker"
                            Title="Tipo de Residência"
                            SelectedIndexChanged="TipoResidenciaPicker_SelectedIndexChanged">
                        <Picker.Items>
                            <x:String>Casa</x:String>
                            <x:String>Apartamento</x:String>
                        </Picker.Items>
                    </Picker>

                    <Entry x:Name="NomeApartamentoEntry"
                           Placeholder="Nome do Condomínio / Bloco"
                           IsVisible="False"/>

                </VerticalStackLayout>
            </Frame>


            <!-- BOTÕES -->
            <VerticalStackLayout Spacing="15">
                <Button Text="Salvar Alterações"
                        BackgroundColor="#4CAF50"
                        TextColor="White"
                        CornerRadius="12"
                        HeightRequest="50"
                        Clicked="OnSalvarClicked"/>

                <Button Text="Executar Logoff"
                        BackgroundColor="Red"
                        TextColor="White"
                        CornerRadius="12"
                        HeightRequest="50"
                        Clicked="OnLogoutClicked"/>
            </VerticalStackLayout>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
